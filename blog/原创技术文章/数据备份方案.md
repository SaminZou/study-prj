```yaml
title: 数据备份方案
author: samin
date: 2023-06-29
```

# 1 备份策略

## 1.1 备份频率

1. 选择一个时间，如每周全量备份一次数据库

2. 根据数据的重要程度，对部分重点数据进行每日备份，每月或每周进行一次全量备份

## 1.2 备份方式

1. 外部存储配置

购买一个外置硬盘或 U 盘挂载到服务器上，备份文件产生时同步到外部存储上

- 优点：速度快，成本低

- 缺点：外部存储也有损坏的风险

2. 远程备份

同步备份文件到云服务器上

- 优点：安全、可基于云服务进一步做副本

- 缺点：云资源成本高，传输速度较慢

## 1.3 备份文件存储方式

1. 以文件数量为准，如保存最新的 4 个文件

2. 以文件时效为准，如每个备份文件存储 30 天

## 1.4 备份对象

- PostgreSQL

> TDengine、RabbitMQ、MinIO 可以暂时不考虑

# 2 备份恢复

需要恢复的情况：

- 系统盘或服务器损坏导致数据丢失
- 重要数据误操作导致系统或业务异常
- 用于 UAT 环境验证问题

需要停止应用服务，使用指令恢复指定备份文件后，重启服务验证
