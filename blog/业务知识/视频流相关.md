```yaml
title: 视频流相关
author: samin
date: 2022-09-01
```

# 推流 VS 拉流

推流，指的是把采集阶段封包好的内容传输到服务器的过程。其实就是将现场的视频信号传到网络的过程。

拉流是指服务器已有直播内容，根据协议类型（如RTMP、RTP、RTSP、HTTP等），与服务器建立连接并接收数据，进行拉取的过程。

# 知识点

协议：rtsp、rtp、rtmp、http、websocket

视频格式：mp4、flv

编码格式：H.264、H.265

# ffmpeg

操作视频流数据的命令行工具

[下载地址](https://ffmpeg.org/download.html)

## rtsp to mp4 file

$ ./ffmpeg.exe -y -i rtsp://username:passwd@127.0.0.1:554/h264/ch1/main/av_stream -vcodec copy -f mp4 test.mp4

## rtsp to flv file

$ ./ffmpeg.exe -y -i rtsp://username:passwd@127.0.0.1:554/h264/ch1/main/av_stream -vcodec libx264 -f flv -an test.flv

vcodec：视频编解码器设置

an：关闭声音数据接收

# 通用摄像头定义标准

GB28181